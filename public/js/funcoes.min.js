var funcoes={};funcoes.init=function(){$(".selectStatusDefaut").change(function(){location.href=$(".selectStatusDefaut :selected").attr("id")}),$(".bordaTD").click(function(){location.href=$(this).attr("id")}),$("#buscarRamal").keyup(funcoes.buscarRamal),$("#buscarRamal").focusout(function(){$("#dropBuscaRamal").parent().removeClass("open")}),$(".sidebar-toggle").click(function(){var c=$("body").hasClass("sidebar-collapse")?"":"sidebar-collapse";document.cookie="sidebar="+c+"; expires=Thu, 18 Dec 2400 12:00:00 UTC;"}),$(".cursorPointer").css("cursor","pointer"),$("#placa").change(function(){var c=$(this).val().split("_"),d=c[0];d&&$("#textPlaca").text(d)}),$(".radio_AprovaReprova").click(funcoes.AprovaReprova);var a=window.location.hash;""==a?$(".nav-tabs a:first").tab("show"):a&&$("ul.nav a[href=\""+a+"\"]").tab("show"),$(".nav-tabs a").click(function(){$(this).tab("show");$("body").scrollTop();window.location.hash=this.hash});var b="f";$(".tipoPessoa").click(function(){$(".tipoPessoa").removeClass("active"),$(this).addClass("active"),$("#textoTipoPessoa").val($(this).attr("id")),b=$(this).attr("id"),"f"==$(this).attr("id")?($("#title_nome").text("Nome:"),$("#cpf_cnpj").mask("000.000.000-00")):($("#title_nome").text("Raz\xE3o Social:"),$("#cpf_cnpj").removeClass("mask_cpf").mask("00.000.000/0000-00"))}),$(".trocarVersao").click(funcoes.trocarVersaoGPI),$("#consultarCPF").submit(function(){var c=$("#cpf_cnpj").val();if("f"==b){if(!validarCPF(c))return alert("Por favor digite um cpf v\xE1lido!"),!1;}else if(!validarCNPJ(c))return alert("Por favor digite um cnpj v\xE1lido!"),!1}),$("#tipo_cadastro").change(function(){"venda"==$(this).val()?$("#vigencia").hide():$("#vigencia").show()}),$("#seuCheckbox").click(function(){$("#seuCheckbox").is(":checked")?($("#dadosEndereco").collapse("show"),$(".required").attr("required",!0),$("#endCobranca").val("ativo")):($("#seuCheckbox").attr("checked",!1),$("#dadosEndereco").collapse("hide"),$(".required").attr("required",!1),$("#endCobranca").val("inativo"))}),$("#dadosEndereco").collapse("show"),$("#formAnexos").submit(function(){if(""==$("#assinatura").val())return alert("Por favor selecione um arquivo para inserir!"),!1}),$(".mask_real").priceFormat({prefix:"R$ ",centsSeparator:",",thousandsSeparator:"."}),$(".pia_ip").mask("000.000.000.000"),$(".mask_uf").mask("SS"),$(".mask_cep").mask("00000-000"),$(".mask_ddd").mask("(99)"),$(".mask_placa").mask("SSS-9999"),$(".mask_telefone").mask("(00)00000-0090"),$(".mask_cnpj").mask("00.000.000/0000-00"),$(".mask_hora").mask("00:00"),$(".mask_anofab").mask("00/00"),$(".mask_cpf").mask("000.000.000-00"),$(".mask_latlong").mask("000.00000"),$(".modalOpen").click(funcoes.carregarModal),$(".dropdown-menu").click(function(c){c.stopPropagation(),$(c.target).is("[data-toggle=modal]")&&$($(c.target).data("target")).modal()}),$(".confimarDeleteLink").click(funcoes.confirmaDeleteLink),$(".dialog_Ap").on("click",funcoes.AprovarRequisicoesSPCandSERASA),$(funcoes.AcionarBotao),$(funcoes.Anexos),$(".buscaCEP").click(function(){var c=$("._cep"),d=$("._rua"),f=$("._bairro"),g=$("._cidade"),h=$("._uf");buscaCEPCorreios(c,d,f,g,h,"buscaCEP")}),$(".buscaCepEnderecoCobranca").click(function(){var c=$("#_CE"),d=$("._ruaE"),f=$("._bairroE"),g=$("._cidadeE"),h=$("._ufE");buscaCEPCorreios(c,d,f,g,h,"buscaCepEnderecoCobranca")}),$(".loadForm").submit(funcoes.loadStageForm),$(".botaLoad").click(funcoes.loadStage),$("#sel_plano_assistencial").change(function(){var c=$(this).val();"s"==c?$("#valorpla").fadeIn("slow"):("n"==c||"i"==c)&&$("#valorpla").fadeOut("slow")}),$("#select_seguro").change(function(){var c=$(this).val();$("#selectSeguro").val(null),"s"==c?$("#tipo_seguro").fadeIn():$("#tipo_seguro").fadeOut()}),$("#frm_proposta").submit(function(){if("s"==$("#select_seguro").val()&&"null"==$("select[name=\"tipo_seguro\"]").val())return alert("Informe um Tipo de Seguro."),$("select[name=\"tipo_seguro\"]").focus(),!1})},$(funcoes.init),funcoes.AprovaReprova=function(){var a=$(this).val();"reprovado"==a?($("#boxMotivoReprovacao").fadeIn("slow"),$("#selectReprovado").attr("disabled",!1)):"aprovado"==a&&($("#boxMotivoReprovacao").fadeOut("slow"),$("#selectReprovado").attr("disabled",!0))};function buscaCEPCorreios(a,b,c,d,f,g){if(""==a.val())return alert("campo cep obrigatorio"),a.focus(),!1;b.val("carregando....."),c.val("carregando....."),d.val("carregando....."),f.val("carregando.....");var h=a.val();$.getScript("http://cep.republicavirtual.com.br/web_cep.php?cep="+h+"&formato=javascript",function(){var j=unescape(resultadoCEP.logradouro),k=unescape(resultadoCEP.bairro),l=unescape(resultadoCEP.cidade),m=unescape(resultadoCEP.uf);b.val(j),c.val(k),d.val(l),f.val(m),buscaCodCidade(d,f,g)})}function mudarCamposCep(a,b){alert("N\xE3o foi identificada uma conex\xE3o com a internet.\nPor favor digite os dados manualmente."),a.replaceWith("<select class=\"m_cidades inputWidth100\" name=\""+a.attr("name")+"\" id=\""+a.attr("id")+"\"></select>"),b.replaceWith("<select class=\"m_estados inputWidth100\" name=\""+b.attr("name")+"\" id=\""+b.attr("id")+"\"></select>"),popularEstados()}function buscaCodCidade(a,b,c){$.ajax({url:"modulos/captacao/src/controllers/captacao.php",dataType:"json",type:"post",data:{acao:"consultarCodCidade",cidade:a.val(),uf:b.val()},success:function(d){0==d.cod?(alert("C\xF3digo n\xE3o encontrado no sistema dos correios,\nvoc\xEA ser\xE1 redirecionado para a p\xE1gina do IBGE onde pode fazer a consulta manualmente!"),window.open("http://www.ibge.gov.br/home/geociencias/areaterritorial/area.shtm","_blank")):"buscaCEP"==c?$("input[name=\"cod_municipio\"]").val(d.cod):"buscaCepEnderecoCobranca"==c&&$("input[name=\"cod_municipio_cobranca\"]").val(d.cod)},error:function(){alert("Erro ao enviar requisi\xE7\xE3o!")}})}function validarCPF(a){var b=a;b=b.replace("-",""),b=b.replace(".",""),a=b.replace(".","");var c,d;if(c=0,"00000000000"==a)return!1;for(i=1;9>=i;i++)c+=parseInt(a.substring(i-1,i))*(11-i);if(d=10*c%11,(10==d||11==d)&&(d=0),d!=parseInt(a.substring(9,10)))return!1;for(c=0,i=1;10>=i;i++)c+=parseInt(a.substring(i-1,i))*(12-i);return d=10*c%11,(10==d||11==d)&&(d=0),d==parseInt(a.substring(10,11))}funcoes.AprovarRequisicoesSPCandSERASA=function(){var a=$(this).attr("id").split("_"),b=a[0],c=a[1],d=a[2],f="",g="";g="apRastreador"==d||"apAlarme"==d?"APrP":"RPrP","apRastreador"==d||"apAlarme"==d?$.ajax({url:"application/controllers/cliente.php",data:{acao:g,id:b,tipo:d},type:"POST",dataType:"json",success:function(h){1==h.type&&(alert(c+"\n foi Aprovado com sucesso"),location.reload())},error:function(){alert("error ao enviar")}}):($("#id").val(b),$("#tipo").val(d),$("#acao").val(g),f="rpRastreador"==d?" Rastreado":"Alarme",$(".dialog").dialog({title:" Cliente -"+f}))};function deletaAnexos(a,b,c){if(window.confirm(" Deseja realmente excluir este arquivo  : "+c+"?"))return $.ajax({url:"application/controllers/anexos.php",type:"POST",dataType:"json",data:{id_anexo:b,nome_anexo:c,acao:a},success:function(d){"success"==d.type?(alert("Registro excluido com sucesso!"),location.reload()):(alert("Impossivel excluir este arquivo ! \n verifique se ele possui um usuario ativo"),location.reload())}}),!1}funcoes.loadStage=function(){$(this).prop("disabled",!0)},funcoes.loadStageForm=function(){$(".botaoLoadForm").prop("disabled",!0)};function validarCNPJ(a){var b=a.replace(/[^\d]+/g,"");if(""==b)return!1;if(14!=b.length)return!1;if("00000000000000"==b||"11111111111111"==b||"22222222222222"==b||"33333333333333"==b||"44444444444444"==b||"55555555555555"==b||"66666666666666"==b||"77777777777777"==b||"88888888888888"==b||"99999999999999"==b)return!1;for(tamanho=b.length-2,numeros=b.substring(0,tamanho),digitos=b.substring(tamanho),soma=0,pos=tamanho-7,i=tamanho;1<=i;i--)soma+=numeros.charAt(tamanho-i)*pos--,2>pos&&(pos=9);if(resultado=2>soma%11?0:11-soma%11,resultado!=digitos.charAt(0))return!1;for(++tamanho,numeros=b.substring(0,tamanho),soma=0,pos=tamanho-7,i=tamanho;1<=i;i--)soma+=numeros.charAt(tamanho-i)*pos--,2>pos&&(pos=9);return resultado=2>soma%11?0:11-soma%11,resultado==digitos.charAt(1)}funcoes.deleteEnderecoCobranca=function(){var a=$("#id_cliente").val();$.ajax({url:"application/controllers/captacao/captacao.php",type:"POST",dataType:"json",data:{id_cliente:a,acao:"DeleteEnderecoCobranca"},success:function(b){"success"==b.type&&location.reload()}})};function confirmarDelete(){var a=confirm("Deseja realmente excluir ?");return a}function formataDataPickerLimitado(a,b,c,d,f,g){var h=new Date(a,c,f),j=new Date(b,d,g);$(".datepicker_limitado").datepicker({format:"dd/mm/yyyy",language:"pt-BR",startDate:h,endDate:j}).on("changeDate",function(m){var n=new Date(m.date.valueOf());(n<h||n>j)&&(alert("Essa data n\xE3o tem um per\xEDodo v\xE1lido, por favor selecione uma date entre os periodos de "+(f+"/"+c+"/"+a)+"e "+(g+"/"+d+"/"+b)),$(".datepicker_limitado").val(h))})}funcoes.confirmaDeleteLink=function(){var a=$(this).attr("id");confirmarDelete()&&(location.href=a)},funcoes.carregarModal=function(){var a=$(this).attr("data-target"),b=$(this).attr("id");$(a).html(""),$(a).load(b),$(a).modal()},funcoes.Anexos=function(){var a=$(".selectFile"),b=$(".imagemAssinatura").hide(),c=$(".fileBar");a.click(function(){b.click().change(function(){c.val($(this).val())})})},funcoes.trocarVersaoGPI=function(){var a=$(this).attr("id");$.ajax({url:"modulos/usuarios/src/controllers/usuarios.php",type:"POST",dataType:"json",data:{status:a,acao:"trocarVersaoGPI"},success:function(){window.location.reload()}})},funcoes.buscarRamal=function(){var a=$(this).val();""==a?$("#dropBuscaRamal").parent().removeClass("open"):$.ajax({url:"modulos/ramal/src/controllers/ramal.php",type:"POST",dataType:"json",data:{texto:a,acao:"buscarRamal"},success:function(b){$("#listaRamal li").remove(),0==b.length?$("#listaRamal").append("<li><a>Nenhum registro encontrado!</a></li>"):($.each(b,function(c,d){$("#listaRamal").append("<li><a>"+d.ramal_nome_usuario+" - <strong>"+d.ramal_ramal+"</strong></a></li>")}),$("#dropBuscaRamal").dropdown("toggle"))}})};function empty(a){if(null==a||""==a||0==a||"0"==a)return!0}